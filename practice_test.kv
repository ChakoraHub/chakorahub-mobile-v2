#:kivy 2.2.0

WindowManager:
    PracticeTestsScreen:

<PracticeTestsScreen>:
    name: "practice_tests"
    tests_container: tests_container

    BoxLayout:
        orientation: "vertical"
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        # HEADER
        BoxLayout:
            size_hint_y: None
            height: "80dp"
            padding: "10dp"
            spacing: "10dp"
            canvas.before:
                Color:
                    rgba: 0.39, 0.71, 0.96, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            Image:
                source: "images/logo.png"
                size_hint: None, None
                size: "60dp", "60dp"
                allow_stretch: True
                keep_ratio: True

            Widget:

            Image:
                id: profile_pic
                source: "images/profile.jpg"
                size_hint: None, None
                size: "44dp", "44dp"
                allow_stretch: True
                keep_ratio: True
                on_touch_down:
                    if self.collide_point(*args[1].pos): root.show_profile_menu()

        # CONTENT
        FloatLayout:
            size_hint_y: 1

            BoxLayout:
                size_hint: None, None
                width: root.width * 0.75
                height: dp(400)
                pos_hint: {"center_x": 0.5, "center_y": 0.6}
                orientation: "vertical"
                padding: "20dp"
                spacing: "12dp"
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [15]

                Label:
                    text: "Mathematics – Practice Tests"
                    font_size: "22sp"
                    bold: True
                    color: 0.25, 0.32, 0.71, 1
                    size_hint_y: None
                    height: self.texture_size[1] + 10
                    halign: "center"
                    text_size: self.width, None

                # Dynamic Test Buttons
                BoxLayout:
                    id: tests_container
                    orientation: "vertical"
                    spacing: "10dp"
                    size_hint_y: None
                    height: self.minimum_height

                # Back Button
                Button:
                    text: "← Back to Resources"
                    size_hint_y: None
                    height: "50dp"
                    background_normal: ""
                    background_color: 0.25, 0.32, 0.71, 1
                    color: 1, 1, 1, 1
                    on_release: app.go_back()

<ProfilePopup>:
    title: ""
    size_hint: None, None
    size: "180dp", "160dp"
    auto_dismiss: True
    BoxLayout:
        orientation: "vertical"
        Button:
            text: "Profile"
            on_release: root.dismiss()
        Button:
            text: "Settings"
            on_release: root.dismiss()
        Button:
            text: "Logout"
            on_release:
                root.dismiss()
                app.show_logout_popup()

<LogoutPopup>:
    title: ""
    size_hint: None, None
    size: "280dp", "200dp"
    auto_dismiss: False
    BoxLayout:
        orientation: "vertical"
        spacing: "10dp"
        padding: "10dp"
        Label:
            text: "Are you sure you want to logout?"
            halign: "center"
            valign: "middle"
            text_size: self.size
        BoxLayout:
            size_hint_y: None
            height: "48dp"
            spacing: "10dp"
            Button:
                text: "Yes, Logout"
                background_normal: ""
                background_color: 0.25, 0.32, 0.71, 1
                color: 1, 1, 1, 1
                on_release:
                    root.dismiss()
                    app.logout()
            Button:
                text: "Cancel"
                background_normal: ""
                background_color: 0.8, 0.8, 0.8, 1
                color: 0, 0, 0, 1
                on_release: root.dismiss()